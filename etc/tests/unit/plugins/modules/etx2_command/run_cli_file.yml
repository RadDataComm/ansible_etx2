- name: "Local play"
  hosts: all
  gather_facts: no
  
  # This script runs a file of cli commands, with the extension .txt
  # It is for commands that do NOT need waiting (like copy-config, reboot etc.)
  # For commands that need waiting you will have to create a separate yml file.
  # In this script file_name is a parameter given to the playbook.
  # In order to run this playbook you will have to do:
  # ansible-playbook run_cli_file.yml -e "file_name=/path/to/myfile.txt"
  # -e stands for (extra-vars)

  vars:
    ansible_user: su
    ansible_password: 1234
    ansible_connection: ansible.netcommon.network_cli
    ansible_network_os: rad.etx2.rad

  tasks:

    - name: "Execute CLI script create_mgr from file"
      rad.etx2.etx2_command:
        commands: "{{ lookup('file', file_name) | split('\n') }}"
      register: echo

